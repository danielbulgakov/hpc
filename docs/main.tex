% Compiler parameters

\documentclass[12pt, russian]{extarticle}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage{fontspec}
\defaultfontfeatures{Ligatures={TeX},Renderer=Basic}
\setmainfont[Ligatures={TeX,Historic}]{Times New Roman}
\usepackage[a4paper,
left=25mm,
right=15mm,
top=20mm,
bottom=20mm]{geometry}
\usepackage[linktoc=all]{hyperref}
\usepackage{titlesec}
\titlelabel{\thetitle.\quad}
\usepackage{tocloft}

\renewcommand{\cftsecfont}{}% Remove \bfseries from section titles in ToC
\renewcommand{\cftsecpagefont}{}% Remove \bfseries from section titles' page in ToC
\renewcommand{\cftsecaftersnum}{.}%

\usepackage{titlesec}
\usepackage{todonotes}

\titleformat*{\section}{\large\bfseries} % Здесь можно указать желаемый размер шрифта для \section
\titleformat*{\subsection}{\large\bfseries} % Здесь можно указать желаемый размер шрифта для \subsection
\titleformat*{\subsubsection}{\large\bfseries}

\setlength{\parindent}{1.25cm}
\setlength{\parskip}{0.4cm}
\font\subtitlefont=cmr12 at 12pt
\font\titlefont=cmr12 at 24pt
\usepackage{color}
\usepackage{mathtools}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{tocloft}
\usepackage{indentfirst}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{babel}
\usepackage{setspace}
\renewcommand{\contentsname}{}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\graphicspath{ {./resources/} }

\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\lstset{
    language=Python,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    commentstyle=\color{dkgreen},
    stringstyle=\color{mauve},
    stepnumber=1,
    breaklines=true,
    breakatwhitespace=true,
    tabsize=4,
    captionpos=tl,
}

% End of compiler parameters

\title{}
\author{}
\date{}

\begin{document}

    \begin{titlepage}

        \begin{center}
            МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ РОССИЙСКОЙ ФЕДЕРАЦИИ \\
            Федеральное государственное автономное образовательное \\
            учреждение высшего образования \\
            «Национальный исследовательский Нижегородский государственный университет им. Н.И. Лобачевского»\\
        \end{center}

        \bigbreak

        \begin{center}
            Институт информационных технологий, математики и механики \\
            {\bfseries Кафедра Математического обеспечения и суперкомпьютерных технологий} \\
            Направление подготовки ``Инженерия программного обеспечения"
        \end{center}

        \vspace{2em}

        \begin{center}
            ОТЧЁТ \\ по учебной практике на тему \\
            {\bfseries ``Разработка программно-аппаратного комплекса для мониторинга показателей сердца
            человека''}
        \end{center}

        \vspace{5em}

        \begin{flushright}
            {\bfseries Выполнил:} \\студент группы 382008-1\\Булгаков Д.Э.\\
            \hfill Подпись \hspace{5em} \newline \\
            {\bfseries Проверил:} \\к.т.н., доц.\\ Борисов Н.А. \\
            \hfill Подпись \hspace{5em} \newline \\
        \end{flushright}


        \vspace{\fill}

        \begin{center}
            Нижний Новгород\\2024
        \end{center}
    \end{titlepage}

    \begin{spacing}{1.5}

    % Содержание

    \tableofcontents
    \thispagestyle{empty}
    \newpage

    \pagestyle{plain}
    \setcounter{page}{3}

    % Введение
    \newpage
    \section{Введение}

    Болезни сердца и сосудов, которые приводят к большому числу смертей по всему миру,
    привлекают большое внимание медицинского сообщества. Ишемическая болезнь сердца, высокое
    артериальное давление и другие проблемы с сердечно-сосудистой системой требуют серьезного
    подхода к их выявлению и профилактике.

    Сердечно-сосудистая система, сложная и многофункциональная, подвержена различным воздействиям,
    которые могут привести к серьезным нарушениям. Регулярные обследования играют ключевую роль в этом
    контексте. Они не только помогают выявлять проблемы на ранних стадиях, но и открывают пути для
    раннего вмешательства и эффективной профилактики. Такой подход становится неотъемлемой частью
    стратегии поддержания здоровья сердечно-сосудистой системы в современном мире.

    % Постановка задачи
    \newpage
    \section{Постановка задачи.}

    Необходимо создать сервер, способный принимать, хранить и анализировать данные ЭКГ.
    Сервер будет являться связующим звеном между модулем снятия ЭКГ на основе ESP32 и web-сайтом,
    на котором пользователи смогу просматривать свои показания и возможные проблемы с сердечно-сосудистой
    системой.

    \begin{enumerate}
        \item \textbf{Выбрать стек технологий, на основе которых будет написан сервер.}
            \begin{itemize}
                \item Определить язык программирования для сервера.
                \item Определить какую библиотеку использовать для написания сервера.
                \item Выбрать подходящую базу данных.
            \end{itemize}
        \item \textbf{Определить сценарии использования сервера.} \\
            Сценарии использования разделены на следующие платформы:
            \begin{itemize}
                \item Web сайт на основе Vue.js
                \item Electron приложение.
            \end{itemize}
            Общие сценарии можно обобщить и выделить в отдельную компоненту.
        \item \textbf{Разработать и реализовать архитектуру сервера.}
    \end{enumerate}

    \newpage
    \section{Проведенная работа.}

    \subsection{Стек технологий.}

    \subsubsection{Язык программирования и фреймворк.}

    Перед началом проектирования архитектуры сервера, требуется выбрать язык программирования
    и фреймворк, который обеспечивал бы удобные инструменты для обработки HTTP-запросов,
    маршрутизации и взаимодействия с базой данных. На рассмотрении были следующие варианты:

    \begin{itemize}
        \item Node.js с фреймворком Express.js
        \item Golang с фреймворками Gin или Martini
        \item Python с фреймворками Flask или Django
    \end{itemize}

    Необходимо сравнить основные характеристики каждого решения,
    такие как производительность, удобство и простота разработки, доступность библиотек и инструментов,
    а также сообщество и поддержка. Прежде всего, было решено остановиться на языке программирования
    Python по следующим причинам:

    \begin{itemize}
        \item \textbf{Простота и читаемость кода:} \\
            Python известен своим чистым и выразительным синтаксисом,
            который делает код легким для чтения, понимания и поддержки.
        \item \textbf{Широкие возможности для веб-разработки:} \\
            Python имеет обширную экосистему библиотек и фреймворков для веб-разработки.
            Flask, Django, FastAPI - все они предоставляют мощные инструменты для создания веб-приложений
            любого уровня сложности.
        \item \textbf{Кросс-платформенность и портативность:} \\
            Python работает на множестве операционных систем, что обеспечивает гибкость и
            портативность разработки. Это означает, что код, написанный на Python,
            может быть легко перенесен с одной платформы на другую без необходимости
            внесения значительных изменений.
        \item \textbf{Богатая стандартная библиотека:} \\
            Python поставляется с обширной стандартной библиотекой, которая включает
            в себя множество модулей для работы с сетью, обработки данных, взаимодействия
            с базами данных и многое другое.
    \end{itemize}

    Осталось определиться с фреймворком Python. Было решено использовать Flask, т.к.
    сервер является учебным, небольшим проектом, он не требует таких глобальных и серьезных
    инструментов, которые предоставляет Django. Также Flask обладает более интуитивно понятный интерфейсом,
    что позволит меньше времени потратить на изучение инструмента.

    \subsubsection{База данных.}

    Для структурирования и хранения данных необходимо выбрать базу данных, которая лучше всего
    подойдет к выбранному фреймворку. На рассмотрении были следующие варианты:

    \begin{itemize}
        \item PostgreSQL
        \item SQLite
        \item MySQL
        \item MongoDB
        \item Redis
    \end{itemize}

    По итогу, было решено использовать PostgreSQL из-за его надежности, расширяемости, а также доступности.
    Кроме того, PostgreSQL активно развивается сообществом и имеет обширную документацию,
    что делает его привлекательным выбором для учебных проектов.

    \subsubsection{Выбор инструментов для развертывания приложения.}

    Для обеспечения более удобного и гибкого процесса разработки и развертывания,
    было принято решение использовать Docker.

    Docker обеспечивает создание и управление контейнеризированными средами разработки и развертывания,
    что значительно упрощает процесс настройки окружения и обеспечивает переносимость приложения между
    различными средами. Кроме того, Docker обеспечивает изолированное выполнение приложений,
    что позволяет избежать конфликтов между зависимостями и обеспечивает надежность работы приложения.

    \newpage
    \subsection{Сценарии использования.}

    Серверная часть приложения должна обрабатывать запросы, поступающие от двух типов клиентских приложений:

    \begin{itemize}
        \item Десктопное приложение на основе фреймворка Electron.
        \item Web-приложение на основе Vue.js
    \end{itemize}

    Некоторые сценарии использования применимы к обоим типам приложений, поэтому они выделены в отдельный
    модуль, который содержит общие сценарии использования.

    \subsubsection{Общие сценарии использования.}

    \begin{itemize}
        \item \textbf{Идентификация, аутентификация и авторизация пользователя:} \\
            На сервере будет хранится и обрабатываться информация всех пользователей, поэтому
            пользователи должны иметь возможность идентифицировать себя на сервере,
            проходить аутентификацию и, при необходимости,
            проходить авторизацию для доступа к определенным ресурсам или функциональности.
        \item \textbf{Маршруты для работы с сессионными ключами:} \\
            Для работы с цифровыми личностями используются сессионные ключи.
            Поэтому необходимо поддерживать маршруты для создания новых сессионных ключей,
            обновление их срока действия и удаление ключей после завершения сеанса работы пользователя.
    \end{itemize}

    \subsubsection{Сценарии использования для Electron приложения.}

    Electron-приложение служит посредником для передачи данных ЭКГ с устройства ESP32 на сервер.
    Кроме общих сценариев использования в API приложения должны быть реализованы следующие пункты:

    \begin{itemize}
        \item \textbf{Разработка маршрутов для приема данных ЭКГ от приложения Electron:} \\
            Предполагает создание маршрутов на сервере, которые будут принимать данные ЭКГ,
            отправленные из приложения Electron, и обрабатывать их для последующего сохранения или анализа.
        \item \textbf{Создание механизмов хранения полученных данных ЭКГ на сервере:} \\
            Требует разработки функционала для сохранения полученных данных ЭКГ на сервере.
            Это может включать в себя разработку механизмов для хранения и организации данных.
        \item \textbf{Разработка механизмов передачи данных ЭКГ на анализ искусственным интеллектом:} \\
            Включает в себя создание функционала для передачи данных ЭКГ на анализ искусственным интеллектом.
            Это может включать в себя разработку API или механизмов интеграции с собственными моделями
            искусственного интеллекта для обработки данных и генерации результатов анализа.
    \end{itemize}

    \subsubsection{Сценарии использования для Web-приложения.}

    Web-приложение является основным источником для изучения и рассмотрения пользователем своих данных ЭКГ.
    Кроме общих сценариев использования в API приложения должны быть реализованы следующие пункты:

    \begin{itemize}
        \item \textbf{Обновление данных пользователя:} \\
            Пользователь изменяет свои данные, такие как дата рождения, и отправляет их на сервер для обновления.
        \item \textbf{Отображение графиков ЭКГ:} \\
            Пользователь запрашивает просмотр графиков данных ЭКГ, полученных от Electron приложения.
        \item \textbf{Вывод заключения о состоянии здоровья:} \\
            Пользователь запрашивает анализ состояния здоровья на основе данных ЭКГ,
            анализируемых искусственным интеллектом.
    \end{itemize}

    \newpage
    \subsection{Разработка и реализация архитектуры.}

    \subsubsection{Использование Docker для контейнеризации приложения.}

    Для упрощения процесса разработки, тестирования и развертывания серверного
    приложения был использован Docker.
    Вот основные шаги при разработке приложения с использованием Docker:

    \begin{enumerate}
        \item \textbf{Определение сервисов в файле docker-compose.yml:}
        \begin{itemize}
            \item В файле \texttt{docker-compose.yml} определены два сервиса: \texttt{web}
                для серверного приложения на Flask и \texttt{postgres} для базы данных PostgreSQL.
            \item Для каждого сервиса указаны настройки, такие как сборка образа, зависимости, порты,
                переменные окружения и т.д.
        \end{itemize}
        \item \textbf{Настройка среды разработки:}
        \begin{itemize}
            \item Для сервиса \texttt{web} указаны переменные окружения \texttt{FLASK\_APP} И
                \texttt{FLASK\_ENV}, определяющие основные параметры запуска Flask приложения.
            \item В качестве базового образа для серверного приложения использован официальный образ
                Python с поддержкой Ubuntu 22.04.
        \end{itemize}
        \item \textbf{Управление зависимостями и файлами приложения:}
        \begin{itemize}
            \item В Dockerfile определены шаги для установки зависимостей из файла \\
                \texttt{requirements.txt} и копирования всех остальных файлов приложения внутрь контейнера.
            \item Это позволяет изолировать приложение и его зависимости внутри контейнера,
                обеспечивая надежную и воспроизводимую среду выполнения.
        \end{itemize}
        \item \textbf{Использование внешнего образа PostgreSQL:}
        \begin{itemize}
            \item Для сервиса \texttt{postgres} использован официальный образ PostgreSQL.
            \item В volumes прописан путь к файлу \texttt{init.sql}, который будет запущен при
                инициализации контейнера и содержит SQL-запросы для создания базы данных и таблиц.
        \end{itemize}
        \item \textbf{Управление данными:}
        \begin{itemize}
            \item Для сохранения данных базы данных PostgreSQL использован Docker volume, который
                привязывается к директории внутри контейнера.
            \item Это обеспечивает сохранность данных даже при перезапуске контейнера или удалении образа.
        \end{itemize}
        \item \textbf{Метаданные образа и авторство:}
        \begin{itemize}
            \item В Dockerfile добавлены метаданные, такие как метка \texttt{maintainer} с указанием
                контактной информации разработчика и метка \texttt{description} с кратким описанием приложения.
        \end{itemize}
    \end{enumerate}

    \subsubsection{Разработка и реализация логики на Python с использованием Flask.}

    Для создания серверной части приложения был выбран фреймворк Flask, который написан для Python.
    Вот основные шаги при разработке приложения с использованием Flask:

    \begin{enumerate}
        \item \textbf{Инициализация приложения и настройка JWT:}
            \begin{itemize}
                \item В файле app.py создается объект Flask приложения и настраивается JWT (JSON Web Tokens)
                    для обеспечения безопасной аутентификации пользователей.
                \item Для генерации токенов используется секретный ключ и указывается срок действия токена.
            \end{itemize}
        \item \textbf{Обработка исключений JWT:}
            \begin{itemize}
                \item В приложении реализована обработка исключений, связанных с JWT,
                    таких как отсутствие заголовка авторизации, неверный заголовок
                    авторизации и истекший срок действия токена.
            \end{itemize}
        \item \textbf{Регистрация маршрутов:}
        \begin{itemize}
                \item Для каждого сценария использования определены маршруты и функции-обработчики.
                \item Для удобства организации и читабельности кода, маршруты разделены на модули
                    \verb|common|, \verb|web| и \verb|app| по типу сценария.
            \end{itemize}
        \item \textbf{Разработка функционала доступа к данным:}
            \begin{itemize}
                \item Для удобства доступа к данным и выполнения операций CRUD (создание, чтение, обновление, удаление)
                    были реализованы модели данных и базовый класс, предоставляющий общие методы для работы с базой данных.
                \item Это позволяет упростить разработку и обеспечить единый подход к взаимодействию
                    с данными из различных частей приложения.
            \end{itemize}
        \item \textbf{Использование библиотек:}
            \begin{itemize}
                \item Для работы с базой данных в приложении был выбран фреймворк SQLAlchemy,
                    обеспечивающий ORM (объектно-реляционное отображение) и удобные инструменты для работы
                    с реляционными базами данных.
                \item Это позволяет использовать объектно-ориентированный подход при работе с данными
                    и упрощает процесс взаимодействия с базой данных.
            \end{itemize}
    \end{enumerate}

    \subsubsection{Работа с базой данных.}

    Для обеспечения хранения и управления данными серверного приложения была
    выбрана реляционная база данных. Разработка и реализация базы данных включает в себя следующие шаги:

    \begin{enumerate}
        \item \textbf{Создание схемы базы данных:}
            \begin{itemize}
                \item В ходе проектирования было определено три основных сущности: пользователи
                    данные ЭКГ и аутентификационные данные.
                \item Для каждой сущности была разработана соответствующая таблица в базе данных,
                    представляющая собой логическую структуру для хранения данных.
            \end{itemize}
        \item \textbf{Определение полей и их типов:}
            \begin{itemize}
                \item Каждая таблица содержит набор полей, определяющих характеристики сущности.
                \item Типы данных для полей выбирались с учетом требований к хранению и обработке информации.
            \end{itemize}
        \item \textbf{Определение отношений между таблицами:}
            \begin{itemize}
                \item Для связывания данных между таблицами были определены внешние ключи и отношения.
                \item Например, таблица аутентификационных данных имеет внешний ключ, связывающий ее с таблицей пользователей.
            \end{itemize}
    \end{enumerate}

    \newpage
    \section{Заключение.}

    Таким образом, в результате выполнения практики были достигнуты значительные
    результаты в разработке серверной части приложения на основе Python Flask.
    Процесс разработки позволил мне ознакомиться с основными инструментами и технологиями,
    необходимыми для создания современных веб-приложений.

    Основные достижения включают в себя:

    \begin{enumerate}
        \item Разработка и настройка маршрутов для обработки запросов от клиентских приложений
            на базе Electron и веб-приложений на Vue.js.
        \item Реализация аутентификации и регистрации пользователей с использованием JWT
            для обеспечения безопасности взаимодействия с сервером.
        \item Внедрение базы данных PostgreSQL с использованием SQLAlchemy для хранения
            данных пользователей и их аутентификационных данных.
        \item Освоение Docker для удобного развертывания и управления серверным приложением
            в изолированных контейнерах.
    \end{enumerate}

    \newpage
    \section{Список литературы.}

    \begin{enumerate}
        \item Гринберг, М. Flask Web Development: Developing Web Applications with Python [Текст] / М. Гринберг. - СПб.: Наука, 2018. - 300 с.
        \item Гонсалес, М. PostgreSQL: Up and Running: A Practical Guide to the Advanced Open Source Database [Текст] / М. Гонсалес. - М.: Вильямс, 2019. - 400 с.
        \item Cochrane, K. Docker Cookbook: Over 100 practical and insightful recipes to build distributed applications with Docker, 2nd Edition [Текст] / K. Cochrane. - М.: Питер, 2019. - 350 с.
        \item Pallets Projects. Flask Documentation [Электронный ресурс]. - \\
            Режим доступа: https://flask.palletsprojects.com/ (дата обращения: 05.05.2024).
        \item SQLAlchemy Documentation [Электронный ресурс]. - \\
            Режим доступа: https://docs.sqlalchemy.org/en/20/ (дата обращения: 05.05.2024).
    \end{enumerate}

    \newpage
    \section{Приложение.}

    \end{spacing}
\end{document}